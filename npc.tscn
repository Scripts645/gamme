[gd_scene load_steps=5 format=3 uid="uid://bb22tefhfsqcs"]

[ext_resource type="Texture2D" uid="uid://b2xu0h1wwj8gc" path="res://Night/pistol-removebg-preview.png" id="1_ideak"]

[sub_resource type="GDScript" id="GDScript_ideak"]
script/source = "# NPCDialog.gd
extends Area2D

@export var dialog_lines: Array[String] = [
	\"Hello traveler!\",
	\"It's dangerous to go alone.\",
	\"Take this advice: save often!\"
]

var current_line := 0
var dialog_active := false

# Reference to the dialog UI (e.g., a Label or Control node in your scene)
@export var dialog_label: NodePath
var dialog_ui: Label

func _ready() -> void:
	if dialog_label != NodePath():
		dialog_ui = get_node(dialog_label) as Label

	connect(\"body_entered\", Callable(self, \"_on_body_entered\"))

func _on_body_entered(body: Node) -> void:
	if body.is_in_group(\"Player\") and not dialog_active:
		_start_dialog()

func _process(delta: float) -> void:
	if dialog_active and Input.is_action_just_pressed(\"ui_accept\"):
		_show_next_line()

func _start_dialog() -> void:
	dialog_active = true
	current_line = 0
	_show_next_line()

func _show_next_line() -> void:
	if current_line < dialog_lines.size():
		dialog_ui.text = dialog_lines[current_line]
		current_line += 1
	else:
		_end_dialog()

func _end_dialog() -> void:
	dialog_active = false
	dialog_ui.text = \"\"
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xxcha"]
size = Vector2(151, 147)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kh24r"]
size = Vector2(155, 148)

[node name="Area2D" type="Area2D"]
script = SubResource("GDScript_ideak")

[node name="CharacterBody2D" type="CharacterBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="CharacterBody2D"]
position = Vector2(684.5, 223.5)
shape = SubResource("RectangleShape2D_xxcha")

[node name="Sprite2D" type="Sprite2D" parent="CharacterBody2D"]
position = Vector2(685.5, 237)
scale = Vector2(1.3423077, 1.3)
texture = ExtResource("1_ideak")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(686.5, 225)
shape = SubResource("RectangleShape2D_kh24r")
